node("x86_runner1"){
    stage('*** Cleanup***') {
        cleanWs()
    }
    stage('*** Prepare Environment ***') {
        sh '''#!/bin/bash
            ls
            rm -rf ./*
         '''
    } 
    stage('*** Check out SCM ***') {
        checkout scm
    } 
    stage('*** Compilation Phase ***') { 
        sh '''#!/bin/bash
            cat ./jenkinsfile
            as --version
            ttps://github.com/riscv-collab/riscv-gnu-toolchain/releases/download/2021.09.21/riscv64-glibc-ubuntu-20.04-nightly-2021.09.21-nightly.tar.gz
            tar xzvf riscv64-glibc-ubuntu-20.04-nightly-2021.09.21-nightly.tar.gz
            CC=$PWD/riscv/bin/riscv64-unknown-linux-gnu-gcc CXX=$PWD/riscv/bin/riscv64-unknown-linux-gnu-g++ CC_host=gcc CXX_host=g++ ./configure --dest-cpu=riscv64 --cross-compiling --openssl-no-asm
            make -j 4
         '''
    }
    stage (' *** Test ***'){
        sh '''#!/bin/bash
            LD_LIBRARY_PATH=$PWD/riscv/sysroot/lib $PWD/riscv/sysroot/lib/ld-linux-riscv64-lp64d.so.1 ./node -v
         '''
    }
}
